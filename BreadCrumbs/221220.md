# TypeScript

### visaTypeì„ Refactoring

- ë³€ê²½ ì „ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì•˜ìŒ.

```TSX
// markup-data//user-manager.ts
interface Gender {
  id: number;
  name: string;
}

export const SELECTED_VISA_YEAR: VisaYear[] = [
  {
    id: 0,
    name: '3ë…„',
  },
  {
    id: 1,
    name: '5ë…„',
  },
  {
    id: 2,
    name: '10ë…„',
  },
];


// addItem.page.tsx
  const [closetItemInfo, setClosetItemInfo] = useState({
    name: '',
    mainImg: null,
    subImg: null,
    visaType: `ë¹„ì ${'3ë…„'}`,
  });

  const appendClosetItemInfo = (key: string, value: string) => {
    setClosetItemInfo({ ...closetItemInfo, [key]: value });
  };

// DropdownSelect
    <DropdownSelect
    initialValue={closetItemInfo.visaType}
    optionsList={SELECTED_VISA_YEAR.map(({ name }) => name)}
    onSelect={(selectValue) => {
        appendClosetItemInfo('visaType', `ë¹„ì ${selectValue}`);
    }}
    />
```

<br>

- ë¦¬ë·°ë¥¼ ë°›ê³  ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•  ìˆ˜ ìˆì—ˆìŒ ğŸ™

```TSX
// markup-data//user-manager.ts
// nameì„ periodë¡œ ë³€ê²½í•˜ê³ , typeì„ íƒ€ì´íŠ¸í•˜ê²Œ ì¡ì„ ìˆ˜ ìˆì—ˆìŒ.
export interface VisaYear {
  id: number;
  period: '3ë…„' | '5ë…„' | '10ë…„';
}


// typeì„ import í•  ê²½ìš° typeì´ë¼ê³  í‘œí˜„í•´ì£¼ë©´ ëŸ°íƒ€ì„ì‹œ ë¹Œë“œ ë˜ì§€ ì•ŠìŒ
import type { VisaYear } from 'markup_data/data-manager/user-manager';
import { SELECTED_VISA_YEAR } from 'markup_data/data-manager/user-manager';



interface CloseItemInfo {
  name: string;
  mainImg: null | string;
  subImg: null | string;
  visaYear: VisaYear['period']; // VisaYearì˜ periodë¥¼ íƒ€ì…ìœ¼ë¡œ ë§¤ê²¨ì¤Œ
}

  const [closetItemInfo, setClosetItemInfo] = useState<CloseItemInfo>({
    name: '',
    mainImg: null,
    subImg: null,
    visaYear: SELECTED_VISA_YEAR[0].period,
  });

  const appendClosetItemInfo = <K extends keyof CloseItemInfo>(
    key: K,
    value: CloseItemInfo[K],
  ) => {
    setClosetItemInfo({ ...closetItemInfo, [key]: value });
  };


    <DropdownSelect
    className="w-[118px] ml-[8px]"
    initialValue={`ë¹„ì ${closetItemInfo.visaYear}`}
    hasIcon
    optionsList={SELECTED_VISA_YEAR.map(
        ({ period }) => `ë¹„ì ${period}`,
    )}
    iconSrc={'/images/icon/caret_down.svg'}
    onSelect={(selectValue) => {
        appendClosetItemInfo('visaYear', selectValue.slice(3));
    }}
    />
```

- ì´ë•Œ ì¡°ê¸ˆ ê¼¬ì˜€ì—ˆëŠ”ë°, ë™ë£Œë¶„ê»˜ì„œ ë„ì™€ì£¼ì…”ì„œ í•´ê²° í–ˆìŒ
- ê¼¬ì˜€ë˜ ì´ìœ ëŠ”, DropDownBar ê³µí†µìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” common componentì„ (ë³€ê²½ë¶ˆê°€)
- ê·¸ë˜ì„œ onSelectë¥¼ ë‚´ë ¤ ì¤„ ë•Œ sliceë¡œ í•´ë‹¹ ì—°ë„ê¹Œì§€ë§Œ ì§¤ë¼ì„œ í‘œí˜„í•´ì¤¬ìŒ, `ë¹„ì 5ë…„` â†’ `5ë…„`

<br>

- ë¦¬ë·° ë‚´ìš©ì—ì„œëŠ” `SELECTED_VISA_YEAR`ì˜ ê°’ì„ í•˜ë“œì½”ë”© í•˜ê¸° ë³´ë‹¨, ê°’ì„ ì§ì ‘ ê°€ì ¸ì˜¤ëŠ” ê²ƒì´ ë” ì¢‹ì€ ë°©ë²•ì´ê³ ,
- useState íƒ€ì´í•‘ë„ ëª…í™•íˆ í•´ì£¼ë©´ ì¢‹ë‹¤ê³  ë§ì”€í•´ì£¼ì‹¬
- ì´ë ‡ê²Œ ìˆ˜ì • í–ˆì„ ë•Œ **ì»´í¬ë„ŒíŠ¸ë“¤ì˜ ê´€ê³„(=ì˜ì¡´ì„±)ê°€ ëª…í™•í•´ì ¸ì„œ** ì½”ë“œë¥¼ íŒŒì•…í•˜ê¸° ì¢‹ë‹¤ëŠ” ë¦¬ë·°ë¥¼ ë°›ìŒ.

<br>

### event type ìˆ˜ì •

```TSX
interface Event<T = EventTarget> {
  target: T;
}

// ë³€ê²½ ì „
  const saveMainImage = (e: Event<HTMLInputElement>) => {
    const reader = new FileReader();
    reader.onload = () => {
      setClosetItemInfo({ ...closetItemInfo, mainImg: reader.result });
    };
    return reader.readAsDataURL(e.target.files[0]);
  };
```

- ChangeEventë‚˜ MouseEventë¡œ ë³€ê²½

```TSX
// ë³€ê²½ í›„
  const saveMainImage = (e: ChangeEvent<HTMLInputElement>) => {
    const reader = new FileReader();

    reader.onload = () => {
      if (reader.result instanceof ArrayBuffer) return;

      setClosetItemInfo({
        ...closetItemInfo,
        mainImg: reader.result,
      });
    };
    return reader.readAsDataURL(e.target.files[0]);
  };
```

- ê¸°ì¡´ì—ëŠ” íƒ€ì…ë‹¨ì–¸ì„ ì‚¬ìš©í•˜ë ¤ í–ˆì§€ë§Œ, íƒ€ì…ê°€ë“œë¡œ ì‚¬ìš©í•˜ëŠ”ê²Œ ë” ë‚«ê² ë‹¤ê³  íŒë‹¨
- ì—¬ê¸°ì„œ `ArrayBuffer`ê³¼ `instanceof`ë¥¼ ì‚¬ìš©í•´ë´¤ìŒ  
  â†’ typeof, interface ì •ë¦¬ í•„ìš”í•¨

<br>

### instanceof vs typeof

<br>

### ì°¸ê³ ìë£Œ

[[TypeScript/3.8] íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ 3.8ì—ì„œ ë°”ë€ ê²ƒë“¤ì— ëŒ€í•˜ì—¬](https://im-developer.tistory.com/187)

- type importëŠ” ëŸ°íƒ€ì„ì‹œ, ì™„ì „íˆ ì§€ì›Œì§„ë‹¤.
